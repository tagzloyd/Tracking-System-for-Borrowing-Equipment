import{r as l,j as e,Q as v,S,a as q}from"./app-mVC3eKZ5.js";function _(){const[x,n]=l.useState(!1),[b,h]=l.useState(null),[f,r]=l.useState(null),[t,d]=l.useState(1),[s,g]=l.useState({name:"",email:"",phone:"",equipment_name:"",start_time:"",end_time:"",status:"Still Borrowing"}),a=c=>{const{name:i,value:o}=c.target;g(u=>({...u,[i]:o}))},y=async c=>{var i,o;if(c.preventDefault(),n(!0),r(null),h(null),!s.end_time){r("Please specify expected return date"),n(!1);return}if(new Date(s.end_time)<=new Date(s.start_time)){r("Return date must be after borrow date"),n(!1);return}try{await q.post("/api/tracking/store-outsider",{...s,user_type:"outsider"}),h("Your borrowing request has been submitted for approval!"),g({name:"",email:"",phone:"",equipment_name:"",start_time:"",end_time:"",status:"Still Borrowing"}),d(1)}catch(u){r(((o=(i=u.response)==null?void 0:i.data)==null?void 0:o.message)||"Failed to submit request")}finally{n(!1)}},N=()=>{if(t===1&&(!s.name||!s.email||!s.phone)){r("Please fill all personal information fields");return}r(null),d(t+1)},w=()=>{r(null),d(t-1)},p=new Date().toISOString().slice(0,16),m=new Date;m.setDate(m.getDate()+30);const j=m.toISOString().slice(0,16);return e.jsxs("div",{className:"min-h-screen flex flex-col bg-gray-100",children:[e.jsx(v,{title:"Outsider Equipment Borrowing Form"}),e.jsx("header",{className:"bg-white shadow-sm",children:e.jsxs("div",{className:"max-w-7xl mx-auto py-4 px-4 sm:px-6 lg:px-8 flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center",children:e.jsx("img",{src:"https://www.carsu.edu.ph/wp-content/uploads/2024/10/CSU-logo-2-black-text-1-1.svg",alt:"CSU Logo",className:"h-12 w-auto mr-4 drop-shadow-lg",style:{maxWidth:160}})}),e.jsx("div",{className:"text-sm text-gray-500",children:"Equipment Borrowing System"})]})}),e.jsx("main",{className:"flex-1 flex items-center justify-center",children:e.jsx("div",{className:"w-full max-w-2xl h-[calc(100vh-90px)] flex flex-col justify-center",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-lg flex flex-col h-full",children:[e.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b",children:[e.jsxs("button",{onClick:()=>S.get("/Attendance"),className:"flex items-center text-blue-600 hover:text-blue-800 transition-colors",children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Back to Dashboard"]}),e.jsx("div",{children:e.jsx("p",{className:"text-gray-500 text-sm",children:"Fill out the form to borrow equipment"})})]}),e.jsxs("div",{className:"flex justify-center my-4",children:[e.jsxs("div",{className:`flex items-center ${t>=1?"text-blue-600":"text-gray-400"}`,children:[e.jsx("div",{className:`rounded-full h-8 w-8 flex items-center justify-center ${t>=1?"bg-blue-100":"bg-gray-100"}`,children:"1"}),e.jsx("div",{className:"ml-2 text-sm",children:"Personal Info"})]}),e.jsx("div",{className:"flex items-center mx-4",children:e.jsx("div",{className:"border-t-2 w-8 border-gray-300"})}),e.jsxs("div",{className:`flex items-center ${t>=2?"text-blue-600":"text-gray-400"}`,children:[e.jsx("div",{className:`rounded-full h-8 w-8 flex items-center justify-center ${t>=2?"bg-blue-100":"bg-gray-100"}`,children:"2"}),e.jsx("div",{className:"ml-2 text-sm",children:"Equipment"})]})]}),e.jsxs("div",{className:"px-6",children:[b&&e.jsx("div",{className:"mb-4 p-4 bg-green-50 border border-green-200 text-green-700 rounded-lg",children:b}),f&&e.jsx("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 text-red-700 rounded-lg",children:f})]}),e.jsxs("form",{onSubmit:y,className:"flex-1 overflow-auto px-6 pb-6",children:[t===1&&e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg mb-6",children:[e.jsx("h2",{className:"text-lg font-medium text-gray-800 mb-4",children:"Personal Information"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Full Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",name:"name",value:s.name,onChange:a,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Email ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"email",name:"email",value:s.email,onChange:a,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Phone Number ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"tel",name:"phone",value:s.phone,onChange:a,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]})]}),e.jsx("div",{className:"mt-6 flex justify-end",children:e.jsx("button",{type:"button",onClick:N,className:"px-4 py-2 bg-blue-600 text-white rounded-md shadow-sm hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Next"})})]}),t===2&&e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg mb-6",children:[e.jsx("h2",{className:"text-lg font-medium text-gray-800 mb-4",children:"Equipment Details"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Equipment to Borrow ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",name:"equipment_name",value:s.equipment_name,onChange:a,required:!0,placeholder:"Enter equipment name",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Borrow Date & Time ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"datetime-local",name:"start_time",value:s.start_time,onChange:a,min:p,max:j,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Return Date & Time ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"datetime-local",name:"end_time",value:s.end_time,onChange:a,min:s.start_time||p,max:j,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]})]})]}),e.jsxs("div",{className:"mt-6 flex justify-between",children:[e.jsx("button",{type:"button",onClick:w,className:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Back"}),e.jsx("button",{type:"submit",disabled:x,className:"px-4 py-2 bg-blue-600 text-white rounded-md shadow-sm hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",children:x?"Submitting...":"Submit Request"})]})]})]})]})})})]})}export{_ as default};
